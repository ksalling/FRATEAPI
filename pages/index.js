import React from 'react';
import gql from 'graphql-tag';
import { useQuery } from '@apollo/react-hooks';
import { Spinner } from '@shopify/polaris';
import IndexInstallCheck from './index-2-installcheck';

function Index() {
    //console.log('Index');
    
    const QUERY_SITEID = gql`
        query {
            shop {
                id,
                name 
            }
        }
    `;

    const { loading, error, data } = useQuery(QUERY_SITEID);

    if (loading) {
        return (
            <div style={{height: '100px'}}>
                <Spinner accessibilityLabel="Spinner example" size="large" color="teal" />
            </div>
        ) } //return 'Loading...';
    if (error) return `Error! ${error.message}`;

    return (
        
            <IndexInstallCheck shop={data.shop} />
        
    )

}

export default Index;